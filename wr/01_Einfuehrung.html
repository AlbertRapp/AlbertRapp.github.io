<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="de" xml:lang="de"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.1.251">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Albert Rapp">

<title>Eine (sehr) kurze R Einführung</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="01_Einfuehrung_files/libs/clipboard/clipboard.min.js"></script>
<script src="01_Einfuehrung_files/libs/quarto-html/quarto.js"></script>
<script src="01_Einfuehrung_files/libs/quarto-html/popper.min.js"></script>
<script src="01_Einfuehrung_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="01_Einfuehrung_files/libs/quarto-html/anchor.min.js"></script>
<link href="01_Einfuehrung_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="01_Einfuehrung_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="01_Einfuehrung_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="01_Einfuehrung_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="01_Einfuehrung_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">

  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Inhaltsverzeichnis</h2>
   
  <ul>
  <li><a href="#installation" id="toc-installation" class="nav-link active" data-scroll-target="#installation">Installation</a>
  <ul class="collapse">
  <li><a href="#benötigte-programme" id="toc-benötigte-programme" class="nav-link" data-scroll-target="#benötigte-programme">Benötigte Programme</a></li>
  <li><a href="#hilfe" id="toc-hilfe" class="nav-link" data-scroll-target="#hilfe">Hilfe</a></li>
  <li><a href="#zusätzliche-pakete" id="toc-zusätzliche-pakete" class="nav-link" data-scroll-target="#zusätzliche-pakete">Zusätzliche Pakete</a></li>
  </ul></li>
  <li><a href="#installierte-pakete-laden" id="toc-installierte-pakete-laden" class="nav-link" data-scroll-target="#installierte-pakete-laden">Installierte Pakete laden</a></li>
  <li><a href="#alles-ist-ein-vektor" id="toc-alles-ist-ein-vektor" class="nav-link" data-scroll-target="#alles-ist-ein-vektor">Alles ist ein Vektor</a>
  <ul class="collapse">
  <li><a href="#wahrheitsvektoren" id="toc-wahrheitsvektoren" class="nav-link" data-scroll-target="#wahrheitsvektoren">Wahrheitsvektoren</a></li>
  <li><a href="#rechnen-mit-vektoren" id="toc-rechnen-mit-vektoren" class="nav-link" data-scroll-target="#rechnen-mit-vektoren">Rechnen mit Vektoren</a></li>
  </ul></li>
  <li><a href="#datenvisualisierung" id="toc-datenvisualisierung" class="nav-link" data-scroll-target="#datenvisualisierung">Datenvisualisierung</a>
  <ul class="collapse">
  <li><a href="#berechnete-größen-visualisieren" id="toc-berechnete-größen-visualisieren" class="nav-link" data-scroll-target="#berechnete-größen-visualisieren">Berechnete Größen visualisieren</a></li>
  </ul></li>
  <li><a href="#eigene-berechnungen-anstellen" id="toc-eigene-berechnungen-anstellen" class="nav-link" data-scroll-target="#eigene-berechnungen-anstellen">Eigene Berechnungen anstellen</a>
  <ul class="collapse">
  <li><a href="#zusammenfassungen-mit-summarise" id="toc-zusammenfassungen-mit-summarise" class="nav-link" data-scroll-target="#zusammenfassungen-mit-summarise">Zusammenfassungen mit <code>summarise()</code></a></li>
  <li><a href="#filtern-mit-filter" id="toc-filtern-mit-filter" class="nav-link" data-scroll-target="#filtern-mit-filter">Filtern mit <code>filter()</code></a></li>
  <li><a href="#vermeiden-von-code-schachtelungen" id="toc-vermeiden-von-code-schachtelungen" class="nav-link" data-scroll-target="#vermeiden-von-code-schachtelungen">Vermeiden von Code-Schachtelungen</a></li>
  <li><a href="#auswählen-von-spalten-mit-select" id="toc-auswählen-von-spalten-mit-select" class="nav-link" data-scroll-target="#auswählen-von-spalten-mit-select">Auswählen von Spalten mit <code>select()</code></a></li>
  <li><a href="#neue-spalten-mit-mutate" id="toc-neue-spalten-mit-mutate" class="nav-link" data-scroll-target="#neue-spalten-mit-mutate">Neue Spalten mit <code>mutate()</code></a></li>
  </ul></li>
  <li><a href="#for-schleifen-und-if-bedinungen" id="toc-for-schleifen-und-if-bedinungen" class="nav-link" data-scroll-target="#for-schleifen-und-if-bedinungen">for-Schleifen und if-Bedinungen</a></li>
  </ul>
</nav>
</div>
<main class="content page-columns page-full" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Eine (sehr) kurze R Einführung</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Autor:in</div>
    <div class="quarto-title-meta-contents">
             <p>Albert Rapp </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Veröffentlichungsdatum</div>
    <div class="quarto-title-meta-contents">
      <p class="date">16. Oktober 2022</p>
    </div>
  </div>
    
  </div>
  

</header>

<section id="installation" class="level1">
<h1>Installation</h1>
<section id="benötigte-programme" class="level2">
<h2 class="anchored" data-anchor-id="benötigte-programme">Benötigte Programme</h2>
<p>Zunachst sollten wir die folgenden Dinge installieren.</p>
<ul>
<li><a href="http://ftp5.gwdg.de/pub/misc/cran/">R für Windows, Mac, Linux</a></li>
<li><a href="https://www.rstudio.com/products/rstudio/">RStudio für Windows, Mac, Linux</a></li>
<li><a href="https://cran.r-project.org/bin/windows/Rtools/rtools42/rtools.html">RTools für Windows</a></li>
</ul>
</section>
<section id="hilfe" class="level2">
<h2 class="anchored" data-anchor-id="hilfe">Hilfe</h2>
<ul>
<li><a href="https://cran.r-project.org/manuals.html">R Manuals</a></li>
<li><a href="https://r4ds.had.co.nz/">R for Data Science</a></li>
<li><a href="https://yards.albert-rapp.de/">YARDS</a></li>
</ul>
<p>Wie bei allen Programmiersprachen lässt sich viel über trial-and-error probieren und lösen. Alternativ gibt es eine riesige R Community und durch eine einfache Internetsuche der Fehlermeldung lassen sich viele Lösungen finden.</p>
</section>
<section id="zusätzliche-pakete" class="level2">
<h2 class="anchored" data-anchor-id="zusätzliche-pakete">Zusätzliche Pakete</h2>
<p>Wenn ihr die drei obigen Sachen installiert habt, so könnt ihr RStudio starten. Dort gebt ihr in den <code>Console</code>-Tab die folgenden Befehle ein.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"tidyverse"</span>)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"palmerpenguins"</span>)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="installierte-pakete-laden" class="level1">
<h1>Installierte Pakete laden</h1>
<p>Lade nun zusätzliche R-Pakete, indem du die folgenden Befehle ausführst. Dies musst du jedes Mal tun, wenn du R startest. <code>install.packages()</code> musst du aber nicht nochmal ausführen.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(palmerpenguins)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stderr">
<pre><code>── Attaching packages ─────────────────────────────────────── tidyverse 1.3.2 ──
✔ ggplot2 3.3.6      ✔ purrr   0.3.5 
✔ tibble  3.1.8      ✔ dplyr   1.0.10
✔ tidyr   1.2.1      ✔ stringr 1.4.1 
✔ readr   2.1.3      ✔ forcats 0.5.2 
── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
✖ dplyr::filter() masks stats::filter()
✖ dplyr::lag()    masks stats::lag()</code></pre>
</div>
</div>
</section>
<section id="alles-ist-ein-vektor" class="level1">
<h1>Alles ist ein Vektor</h1>
<p>Sobald diese Befehle ausgeführt wurden, kannst du auf Datensätze aus diesen Paketen zugreifen. Dazu “führst” du den Namen aus. Dann erhältst du den folgenden Output.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>penguins</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 344 × 8
   species island    bill_length_mm bill_depth_mm flipper_…¹ body_…² sex    year
   &lt;fct&gt;   &lt;fct&gt;              &lt;dbl&gt;         &lt;dbl&gt;      &lt;int&gt;   &lt;int&gt; &lt;fct&gt; &lt;int&gt;
 1 Adelie  Torgersen           39.1          18.7        181    3750 male   2007
 2 Adelie  Torgersen           39.5          17.4        186    3800 fema…  2007
 3 Adelie  Torgersen           40.3          18          195    3250 fema…  2007
 4 Adelie  Torgersen           NA            NA           NA      NA &lt;NA&gt;   2007
 5 Adelie  Torgersen           36.7          19.3        193    3450 fema…  2007
 6 Adelie  Torgersen           39.3          20.6        190    3650 male   2007
 7 Adelie  Torgersen           38.9          17.8        181    3625 fema…  2007
 8 Adelie  Torgersen           39.2          19.6        195    4675 male   2007
 9 Adelie  Torgersen           34.1          18.1        193    3475 &lt;NA&gt;   2007
10 Adelie  Torgersen           42            20.2        190    4250 &lt;NA&gt;   2007
# … with 334 more rows, and abbreviated variable names ¹​flipper_length_mm,
#   ²​body_mass_g</code></pre>
</div>
</div>
<p>Du kannst auf einzelne Spalten mit <code>$</code> zugreifen. Dann erhältst du einen Vektor. Diese sind in R enorm wichtig. Deswegen beschäftigen wir uns auch erstmal kurz mit diesem unsexy erscheinenden Thema. Aber nur kurz. Versprochen!</p>
<p>Gucken wir uns also mal zwei Vektoren aus dem Datensatz <code>penguins</code> an. Wir stellen dabei insbesondere fest, dass Vektoren in R nicht nur Zahlen enthalten müssen. Wir können bspw. auch Texte in einen Vektor drücken. Ein Vektor kann auch fehlende Werte enthalten. Diese werden mit <code>NA</code> gekennzeichnet.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>penguins<span class="sc">$</span>bill_length_mm</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  [1] 39.1 39.5 40.3   NA 36.7 39.3 38.9 39.2 34.1 42.0 37.8 37.8 41.1 38.6 34.6
 [16] 36.6 38.7 42.5 34.4 46.0 37.8 37.7 35.9 38.2 38.8 35.3 40.6 40.5 37.9 40.5
 [31] 39.5 37.2 39.5 40.9 36.4 39.2 38.8 42.2 37.6 39.8 36.5 40.8 36.0 44.1 37.0
 [46] 39.6 41.1 37.5 36.0 42.3 39.6 40.1 35.0 42.0 34.5 41.4 39.0 40.6 36.5 37.6
 [61] 35.7 41.3 37.6 41.1 36.4 41.6 35.5 41.1 35.9 41.8 33.5 39.7 39.6 45.8 35.5
 [76] 42.8 40.9 37.2 36.2 42.1 34.6 42.9 36.7 35.1 37.3 41.3 36.3 36.9 38.3 38.9
 [91] 35.7 41.1 34.0 39.6 36.2 40.8 38.1 40.3 33.1 43.2 35.0 41.0 37.7 37.8 37.9
[106] 39.7 38.6 38.2 38.1 43.2 38.1 45.6 39.7 42.2 39.6 42.7 38.6 37.3 35.7 41.1
[121] 36.2 37.7 40.2 41.4 35.2 40.6 38.8 41.5 39.0 44.1 38.5 43.1 36.8 37.5 38.1
[136] 41.1 35.6 40.2 37.0 39.7 40.2 40.6 32.1 40.7 37.3 39.0 39.2 36.6 36.0 37.8
[151] 36.0 41.5 46.1 50.0 48.7 50.0 47.6 46.5 45.4 46.7 43.3 46.8 40.9 49.0 45.5
[166] 48.4 45.8 49.3 42.0 49.2 46.2 48.7 50.2 45.1 46.5 46.3 42.9 46.1 44.5 47.8
[181] 48.2 50.0 47.3 42.8 45.1 59.6 49.1 48.4 42.6 44.4 44.0 48.7 42.7 49.6 45.3
[196] 49.6 50.5 43.6 45.5 50.5 44.9 45.2 46.6 48.5 45.1 50.1 46.5 45.0 43.8 45.5
[211] 43.2 50.4 45.3 46.2 45.7 54.3 45.8 49.8 46.2 49.5 43.5 50.7 47.7 46.4 48.2
[226] 46.5 46.4 48.6 47.5 51.1 45.2 45.2 49.1 52.5 47.4 50.0 44.9 50.8 43.4 51.3
[241] 47.5 52.1 47.5 52.2 45.5 49.5 44.5 50.8 49.4 46.9 48.4 51.1 48.5 55.9 47.2
[256] 49.1 47.3 46.8 41.7 53.4 43.3 48.1 50.5 49.8 43.5 51.5 46.2 55.1 44.5 48.8
[271] 47.2   NA 46.8 50.4 45.2 49.9 46.5 50.0 51.3 45.4 52.7 45.2 46.1 51.3 46.0
[286] 51.3 46.6 51.7 47.0 52.0 45.9 50.5 50.3 58.0 46.4 49.2 42.4 48.5 43.2 50.6
[301] 46.7 52.0 50.5 49.5 46.4 52.8 40.9 54.2 42.5 51.0 49.7 47.5 47.6 52.0 46.9
[316] 53.5 49.0 46.2 50.9 45.5 50.9 50.8 50.1 49.0 51.5 49.8 48.1 51.4 45.7 50.7
[331] 42.5 52.2 45.2 49.3 50.2 45.6 51.9 46.8 45.7 55.8 43.5 49.6 50.8 50.2</code></pre>
</div>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>penguins<span class="sc">$</span>species</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  [1] Adelie    Adelie    Adelie    Adelie    Adelie    Adelie    Adelie   
  [8] Adelie    Adelie    Adelie    Adelie    Adelie    Adelie    Adelie   
 [15] Adelie    Adelie    Adelie    Adelie    Adelie    Adelie    Adelie   
 [22] Adelie    Adelie    Adelie    Adelie    Adelie    Adelie    Adelie   
 [29] Adelie    Adelie    Adelie    Adelie    Adelie    Adelie    Adelie   
 [36] Adelie    Adelie    Adelie    Adelie    Adelie    Adelie    Adelie   
 [43] Adelie    Adelie    Adelie    Adelie    Adelie    Adelie    Adelie   
 [50] Adelie    Adelie    Adelie    Adelie    Adelie    Adelie    Adelie   
 [57] Adelie    Adelie    Adelie    Adelie    Adelie    Adelie    Adelie   
 [64] Adelie    Adelie    Adelie    Adelie    Adelie    Adelie    Adelie   
 [71] Adelie    Adelie    Adelie    Adelie    Adelie    Adelie    Adelie   
 [78] Adelie    Adelie    Adelie    Adelie    Adelie    Adelie    Adelie   
 [85] Adelie    Adelie    Adelie    Adelie    Adelie    Adelie    Adelie   
 [92] Adelie    Adelie    Adelie    Adelie    Adelie    Adelie    Adelie   
 [99] Adelie    Adelie    Adelie    Adelie    Adelie    Adelie    Adelie   
[106] Adelie    Adelie    Adelie    Adelie    Adelie    Adelie    Adelie   
[113] Adelie    Adelie    Adelie    Adelie    Adelie    Adelie    Adelie   
[120] Adelie    Adelie    Adelie    Adelie    Adelie    Adelie    Adelie   
[127] Adelie    Adelie    Adelie    Adelie    Adelie    Adelie    Adelie   
[134] Adelie    Adelie    Adelie    Adelie    Adelie    Adelie    Adelie   
[141] Adelie    Adelie    Adelie    Adelie    Adelie    Adelie    Adelie   
[148] Adelie    Adelie    Adelie    Adelie    Adelie    Gentoo    Gentoo   
[155] Gentoo    Gentoo    Gentoo    Gentoo    Gentoo    Gentoo    Gentoo   
[162] Gentoo    Gentoo    Gentoo    Gentoo    Gentoo    Gentoo    Gentoo   
[169] Gentoo    Gentoo    Gentoo    Gentoo    Gentoo    Gentoo    Gentoo   
[176] Gentoo    Gentoo    Gentoo    Gentoo    Gentoo    Gentoo    Gentoo   
[183] Gentoo    Gentoo    Gentoo    Gentoo    Gentoo    Gentoo    Gentoo   
[190] Gentoo    Gentoo    Gentoo    Gentoo    Gentoo    Gentoo    Gentoo   
[197] Gentoo    Gentoo    Gentoo    Gentoo    Gentoo    Gentoo    Gentoo   
[204] Gentoo    Gentoo    Gentoo    Gentoo    Gentoo    Gentoo    Gentoo   
[211] Gentoo    Gentoo    Gentoo    Gentoo    Gentoo    Gentoo    Gentoo   
[218] Gentoo    Gentoo    Gentoo    Gentoo    Gentoo    Gentoo    Gentoo   
[225] Gentoo    Gentoo    Gentoo    Gentoo    Gentoo    Gentoo    Gentoo   
[232] Gentoo    Gentoo    Gentoo    Gentoo    Gentoo    Gentoo    Gentoo   
[239] Gentoo    Gentoo    Gentoo    Gentoo    Gentoo    Gentoo    Gentoo   
[246] Gentoo    Gentoo    Gentoo    Gentoo    Gentoo    Gentoo    Gentoo   
[253] Gentoo    Gentoo    Gentoo    Gentoo    Gentoo    Gentoo    Gentoo   
[260] Gentoo    Gentoo    Gentoo    Gentoo    Gentoo    Gentoo    Gentoo   
[267] Gentoo    Gentoo    Gentoo    Gentoo    Gentoo    Gentoo    Gentoo   
[274] Gentoo    Gentoo    Gentoo    Chinstrap Chinstrap Chinstrap Chinstrap
[281] Chinstrap Chinstrap Chinstrap Chinstrap Chinstrap Chinstrap Chinstrap
[288] Chinstrap Chinstrap Chinstrap Chinstrap Chinstrap Chinstrap Chinstrap
[295] Chinstrap Chinstrap Chinstrap Chinstrap Chinstrap Chinstrap Chinstrap
[302] Chinstrap Chinstrap Chinstrap Chinstrap Chinstrap Chinstrap Chinstrap
[309] Chinstrap Chinstrap Chinstrap Chinstrap Chinstrap Chinstrap Chinstrap
[316] Chinstrap Chinstrap Chinstrap Chinstrap Chinstrap Chinstrap Chinstrap
[323] Chinstrap Chinstrap Chinstrap Chinstrap Chinstrap Chinstrap Chinstrap
[330] Chinstrap Chinstrap Chinstrap Chinstrap Chinstrap Chinstrap Chinstrap
[337] Chinstrap Chinstrap Chinstrap Chinstrap Chinstrap Chinstrap Chinstrap
[344] Chinstrap
Levels: Adelie Chinstrap Gentoo</code></pre>
</div>
</div>
<p>Dies hat nun eine Vektorausgabe erzeugt. Du siehst hier alle Einträge des Vektors. Diese nur zu sehen, ist in der Regel unpraktisch. Meistens wollen wir Vektoren weiterverarbeiten.</p>
<p>Am einfachsten geht das, wenn wir Vektoren in eine Variable abspeichern. Das sieht so aus. Das Zeichen <code>&lt;-</code> kannst du mit <code>Alt</code>+<code>-</code> per Tastenkombination erzeugen.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>penguin_bill_length <span class="ot">&lt;-</span> penguins<span class="sc">$</span>bill_length_mm</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Wir haben nun den vorhin ausgegebenen Vektor in eine Variable namens <code>penguin_bill_length</code> gespeichert. Wie du siehst, erzeugt dies keine Ausgabe, aber wir können die Daten jederzeit wieder abrufen. Rufe dazu einfach den Variablennamen auf.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>penguin_bill_length[<span class="dv">1</span><span class="sc">:</span><span class="dv">20</span>]</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 39.1 39.5 40.3   NA 36.7 39.3 38.9 39.2 34.1 42.0 37.8 37.8 41.1 38.6 34.6
[16] 36.6 38.7 42.5 34.4 46.0</code></pre>
</div>
</div>
<p>Hier habe ich den Variablennamen noch zusätzlich mit <code>[1:20]</code> versehen, um mir nur die Einträge 1 bis 20 des Vektors ausgeben zu lassen. Es verschwendet ja sonst viel zu viel Platz jedes Mal alle Einträge abzudrucken.</p>
<p>Dabei ist <code>1:20</code> Abkürzung für einen Vektor, der die natürlichen Zahlen von 1 bis 20 enthält.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span><span class="sc">:</span><span class="dv">20</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1]  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20</code></pre>
</div>
</div>
<p>Somit können wir <code>penguin_bill_length[1:20]</code> von innen nach außen lesen.</p>
<ul>
<li><p><code>1:20</code> erstellt einen Vektor der Zahlen 1, 2, …, 20</p></li>
<li><p><code>[ ]</code> nimmt den vorherigen Vektor entgegen</p></li>
<li><p>Es werden dann die Einträge von <code>penguin_bill_length</code> an den Stellen 1 bis 20 ausgeben.</p></li>
</ul>
<p>Auf die gleiche Art und Weise könnten wir auch beliebige Einträge des Vektors <code>penguin_bill_length</code> angucken. Dazu müssen wir nur einen Vektor erstellen, der die entsprechenden Indizes enthält. Das geht bspw. mit den Funktionen <code>c()</code> und <code>seq()</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">5</span>, <span class="dv">7</span>)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1 5 7</code></pre>
</div>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">seq</span>(<span class="at">from =</span> <span class="dv">4</span>, <span class="at">to =</span> <span class="dv">10</span>, <span class="at">by =</span> <span class="dv">2</span>)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  4  6  8 10</code></pre>
</div>
</div>
<p>Dann erhalten wir die entsprechenden Einträge von <code>penguin_bill_length</code> folgendermaßen</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>penguin_bill_length[<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">5</span>, <span class="dv">7</span>)]</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 39.1 36.7 38.9</code></pre>
</div>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>penguin_bill_length[<span class="fu">seq</span>(<span class="at">from =</span> <span class="dv">4</span>, <span class="at">to =</span> <span class="dv">10</span>, <span class="at">by =</span> <span class="dv">2</span>)]</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]   NA 39.3 39.2 42.0</code></pre>
</div>
</div>
<section id="wahrheitsvektoren" class="level2">
<h2 class="anchored" data-anchor-id="wahrheitsvektoren">Wahrheitsvektoren</h2>
<p>Im letzten Fall haben wir auch einen fehlenden Werte (<code>NA</code>) aus unserem Ursprungsvektor extrahiert. Die stören bei sämtlichen Rechnungen weswegen wir gerne diese <code>NA</code>s rausfiltern würden.</p>
<p>Dies funktioniert mit sogenannten <code>Boolean</code>s, die ich auch gerne <code>Wahrheitsvektoren</code> nenne. Im Prinzip haben wir ja gesehen, dass wir in Vektoren nicht nur Zahlen sondern auch Texte speichern können. Dies geht auch mit den Wahrheitswerten <code>TRUE</code> oder <code>FALSE</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">FALSE</span>, <span class="cn">FALSE</span>)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  TRUE  TRUE FALSE FALSE FALSE</code></pre>
</div>
</div>
<p>Solche Werte werden meistens durch Abfragen erstellt. Nehmen wir dazu mal den Vektor von vorhin und speichern ihn in eine Variable ab.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>some_penguin_bill_lengths <span class="ot">&lt;-</span> penguin_bill_length[<span class="fu">seq</span>(<span class="at">from =</span> <span class="dv">4</span>, <span class="at">to =</span> <span class="dv">10</span>, <span class="at">by =</span> <span class="dv">2</span>)]</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>some_penguin_bill_lengths</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]   NA 39.3 39.2 42.0</code></pre>
</div>
</div>
<p>Abfragen lassen sich jetzt denkbar einfach erstellen. Wir schreiben einfach die Abfrage in die Konsole. Hier ein paar Beispiele</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>some_penguin_bill_lengths <span class="sc">&gt;</span> <span class="dv">40</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="do">## [1]    NA FALSE FALSE  TRUE</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>some_penguin_bill_lengths <span class="sc">&lt;=</span> <span class="dv">40</span></span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a><span class="do">## [1]    NA  TRUE  TRUE FALSE</span></span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Hier zwei = Zeichen benutzen, da wir sonst eine Variable erstellen</span></span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a>some_penguin_bill_lengths <span class="sc">==</span> <span class="fl">39.2</span> </span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true" tabindex="-1"></a><span class="do">## [1]    NA FALSE  TRUE FALSE</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Ihr seht, dass dabei <code>NA</code>s bestehen bleiben und nicht zu <code>TRUE</code> oder <code>FALSE</code> werden. Das ist ein Grund warum <code>NA</code>s nervig sind. Sie laufen einem ständig hinterher und gehen nicht von alleine weg.</p>
<p>Normalerweise können wir Wahrheitsvektoren zur Indizierung von Vektoren benutzten. D.h. anstelle von Zahlen zum Extrahieren von Vektoreinträgen benutzen wir die <code>TRUE</code>s.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Holt zweite und dritte Stelle aus dem</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>some_penguin_bill_lengths[<span class="fu">c</span>(<span class="cn">FALSE</span>, <span class="cn">TRUE</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>)]</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 39.3 39.2</code></pre>
</div>
</div>
<p>Enthält unser Wahrheitsvektor allerdings <code>NA</code>s, so laufen diese uns auch hier hinterher.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>some_penguin_bill_lengths[some_penguin_bill_lengths <span class="sc">&gt;</span> <span class="dv">40</span>]</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] NA 42</code></pre>
</div>
</div>
<p>Es wird also Zeit die nervigen <code>NA</code>s rauszufiltern. Ein wichtiger Helfer dabei ist die <code>is.na()</code> Funktion. Diese erkennt unsere <code>NA</code>s.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">is.na</span>(some_penguin_bill_lengths)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  TRUE FALSE FALSE FALSE</code></pre>
</div>
</div>
<p>Mit dem Umkehroperator <code>!</code> können wir nun <code>TRUE</code> und <code>FALSE</code> invertieren.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="sc">!</span><span class="fu">is.na</span>(some_penguin_bill_lengths)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE  TRUE  TRUE  TRUE</code></pre>
</div>
</div>
<p>Und diesen Vektor können wir nun als Indizierung nehmen, um den fehlenden Wert rauszufiltern.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>some_penguin_bill_lengths[<span class="sc">!</span><span class="fu">is.na</span>(some_penguin_bill_lengths)]</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 39.3 39.2 42.0</code></pre>
</div>
</div>
</section>
<section id="rechnen-mit-vektoren" class="level2">
<h2 class="anchored" data-anchor-id="rechnen-mit-vektoren">Rechnen mit Vektoren</h2>
<p>Vektoren sind nicht nur da, um sie anzugucken und auszugeben. Sie bilden auch unsere Standardrecheneinheit. Hier einige nützliche Befehle, die wir im Zusammenhang mit Vektoren gebrauchen können.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>some_penguin_bill_lengths </span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a><span class="do">## [1]   NA 39.3 39.2 42.0</span></span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Komponentenweise Addition (funktioniert auch mit - * /)</span></span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a><span class="co"># NA bleiben NA</span></span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a>some_penguin_bill_lengths <span class="sc">+</span> <span class="dv">5</span> </span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true" tabindex="-1"></a><span class="do">## [1]   NA 44.3 44.2 47.0</span></span>
<span id="cb38-8"><a href="#cb38-8" aria-hidden="true" tabindex="-1"></a>some_penguin_bill_lengths <span class="sc">+</span> some_penguin_bill_lengths</span>
<span id="cb38-9"><a href="#cb38-9" aria-hidden="true" tabindex="-1"></a><span class="do">## [1]   NA 78.6 78.4 84.0</span></span>
<span id="cb38-10"><a href="#cb38-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-11"><a href="#cb38-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Länge eines Vektors</span></span>
<span id="cb38-12"><a href="#cb38-12" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(some_penguin_bill_lengths)</span>
<span id="cb38-13"><a href="#cb38-13" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 4</span></span>
<span id="cb38-14"><a href="#cb38-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-15"><a href="#cb38-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Zahlenfolge von 1 bis zur Vektorlänge</span></span>
<span id="cb38-16"><a href="#cb38-16" aria-hidden="true" tabindex="-1"></a><span class="fu">seq_along</span>(some_penguin_bill_lengths)</span>
<span id="cb38-17"><a href="#cb38-17" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 1 2 3 4</span></span>
<span id="cb38-18"><a href="#cb38-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-19"><a href="#cb38-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Minimum, Maximum, Durchschnitt</span></span>
<span id="cb38-20"><a href="#cb38-20" aria-hidden="true" tabindex="-1"></a><span class="fu">min</span>(some_penguin_bill_lengths, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb38-21"><a href="#cb38-21" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 39.2</span></span>
<span id="cb38-22"><a href="#cb38-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-23"><a href="#cb38-23" aria-hidden="true" tabindex="-1"></a><span class="fu">max</span>(some_penguin_bill_lengths, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb38-24"><a href="#cb38-24" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 42</span></span>
<span id="cb38-25"><a href="#cb38-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-26"><a href="#cb38-26" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(some_penguin_bill_lengths, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb38-27"><a href="#cb38-27" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 40.16667</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Man bemerke, dass wir das Argument <code>na.rm = TRUE</code> setzen mussten. Dies liegt daran, da wir durch den enthaltenen <code>NA</code> sonst auch immer <code>NA</code> als Ergebnis erhalten würden.</p>
</section>
</section>
<section id="datenvisualisierung" class="level1 page-columns page-full">
<h1>Datenvisualisierung</h1>
<p>So nun haben wir erstmal genug mit Vektoren gerechnet. Kommen wir zu den spannenden Dingen im Leben. Lasst uns Bilder malen!<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a></p>
<p>Dazu rufen wir zunächst die Funktion <code>ggplot()</code> auf.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>()</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="01_Einfuehrung_files/figure-html/unnamed-chunk-20-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Dies ist unsere Leinwand auf die wir weitere Dinge zeichnen werden. Beispielsweise könnten wir mit unseren Penguindaten so ein Punktdiagramm zeichen.</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="01_Einfuehrung_files/figure-html/unnamed-chunk-21-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Dazu gehen wir in den folgenden Schritten vor:</p>
<ol type="1">
<li><p>Punkteschicht mittels <code>geom_point()</code> zur Leinwand “addieren”</p></li>
<li><p>x- und y-Koordinaten der Punkte angeben. Dies geschieht durch den gewöhnungsbedürftigen Syntax <code>mapping = aes(x = ..., y = ...)</code>. Die <code>...</code> werden hierbei durch die entsprechenden Vektoren ersetzt. Wir haben ja gerade gelernt, wie wir diese aus <code>penguins</code> extrahieren.</p></li>
<li><p>Farbe und Größe der Punkte verändern: <code>size = 3</code> und <code>color = 'dodgerblue4'</code></p></li>
<li><p>Punkte ein bisschen transparent machen: <code>alpha = 0.75</code></p></li>
<li><p>Achsen beschriften mithilfe einer “addierten” <code>labs()</code>-Schicht.</p></li>
</ol>
<div class="panel-tabset column-page">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" role="tab" aria-controls="tabset-1-1" aria-selected="true" href="">Schritt 1</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" role="tab" aria-controls="tabset-1-2" aria-selected="false" href="">Schritt 2</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-3" role="tab" aria-controls="tabset-1-3" aria-selected="false" href="">Schritt 3</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-4" role="tab" aria-controls="tabset-1-4" aria-selected="false" href="">Schritt 4</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-5-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-5" role="tab" aria-controls="tabset-1-5" aria-selected="false" href="">Schritt 5</a></li></ul>
<div class="tab-content">
<div id="tabset-1-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-1-1-tab">
<div class="columns">
<div class="column" style="width:50%;">
<section id="input" class="level3">
<h3 class="anchored" data-anchor-id="input">Input</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</div><div class="column" style="width:50%;">
<section id="output" class="level3">
<h3 class="anchored" data-anchor-id="output">Output</h3>
<div class="cell">
<div class="cell-output-display">
<p><img src="01_Einfuehrung_files/figure-html/step1-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
</div>
</div>
</div>
<div id="tabset-1-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-2-tab">
<div class="columns">
<div class="column" style="width:50%;">
<section id="input-1" class="level3">
<h3 class="anchored" data-anchor-id="input-1">Input</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(</span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">mapping =</span> <span class="fu">aes</span>(</span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a>      <span class="at">x =</span> penguins<span class="sc">$</span>bill_length_mm,</span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a>      <span class="at">y =</span> penguins<span class="sc">$</span>flipper_length_mm</span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb41-7"><a href="#cb41-7" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</div><div class="column" style="width:50%;">
<section id="output-1" class="level3">
<h3 class="anchored" data-anchor-id="output-1">Output</h3>
<div class="cell">
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 2 rows containing missing values (geom_point).</code></pre>
</div>
<div class="cell-output-display">
<p><img src="01_Einfuehrung_files/figure-html/step2-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
</div>
</div>
</div>
<div id="tabset-1-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-3-tab">
<div class="columns">
<div class="column" style="width:50%;">
<section id="input-2" class="level3">
<h3 class="anchored" data-anchor-id="input-2">Input</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(</span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">mapping =</span> <span class="fu">aes</span>(</span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a>      <span class="at">x =</span> penguins<span class="sc">$</span>bill_length_mm,</span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a>      <span class="at">y =</span> penguins<span class="sc">$</span>flipper_length_mm</span>
<span id="cb43-6"><a href="#cb43-6" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb43-7"><a href="#cb43-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">'dodgerblue4'</span>,</span>
<span id="cb43-8"><a href="#cb43-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">size =</span> <span class="dv">3</span></span>
<span id="cb43-9"><a href="#cb43-9" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</div><div class="column" style="width:50%;">
<section id="output-2" class="level3">
<h3 class="anchored" data-anchor-id="output-2">Output</h3>
<div class="cell">
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 2 rows containing missing values (geom_point).</code></pre>
</div>
<div class="cell-output-display">
<p><img src="01_Einfuehrung_files/figure-html/step3-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
</div>
</div>
</div>
<div id="tabset-1-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-4-tab">
<div class="columns">
<div class="column" style="width:50%;">
<section id="input-3" class="level3">
<h3 class="anchored" data-anchor-id="input-3">Input</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(</span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">mapping =</span> <span class="fu">aes</span>(</span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a>      <span class="at">x =</span> penguins<span class="sc">$</span>bill_length_mm,</span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a>      <span class="at">y =</span> penguins<span class="sc">$</span>flipper_length_mm</span>
<span id="cb45-6"><a href="#cb45-6" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb45-7"><a href="#cb45-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">'dodgerblue4'</span>,</span>
<span id="cb45-8"><a href="#cb45-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">size =</span> <span class="dv">3</span>,</span>
<span id="cb45-9"><a href="#cb45-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">alpha =</span> <span class="fl">0.75</span></span>
<span id="cb45-10"><a href="#cb45-10" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</div><div class="column" style="width:50%;">
<section id="output-3" class="level3">
<h3 class="anchored" data-anchor-id="output-3">Output</h3>
<div class="cell">
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 2 rows containing missing values (geom_point).</code></pre>
</div>
<div class="cell-output-display">
<p><img src="01_Einfuehrung_files/figure-html/step4-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
</div>
</div>
</div>
<div id="tabset-1-5" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-5-tab">
<div class="columns">
<div class="column" style="width:50%;">
<section id="input-4" class="level3">
<h3 class="anchored" data-anchor-id="input-4">Input</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(</span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">mapping =</span> <span class="fu">aes</span>(</span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a>      <span class="at">x =</span> penguins<span class="sc">$</span>bill_length_mm,</span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a>      <span class="at">y =</span> penguins<span class="sc">$</span>flipper_length_mm</span>
<span id="cb47-6"><a href="#cb47-6" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb47-7"><a href="#cb47-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">'dodgerblue4'</span>,</span>
<span id="cb47-8"><a href="#cb47-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">size =</span> <span class="dv">3</span>,</span>
<span id="cb47-9"><a href="#cb47-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">alpha =</span> <span class="fl">0.75</span></span>
<span id="cb47-10"><a href="#cb47-10" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb47-11"><a href="#cb47-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb47-12"><a href="#cb47-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">'Schnabellänge (in mm)'</span>, </span>
<span id="cb47-13"><a href="#cb47-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">'Flossenlänge (in mm)'</span></span>
<span id="cb47-14"><a href="#cb47-14" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</div><div class="column" style="width:50%;">
<section id="output-4" class="level3">
<h3 class="anchored" data-anchor-id="output-4">Output</h3>
<div class="cell">
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 2 rows containing missing values (geom_point).</code></pre>
</div>
<div class="cell-output-display">
<p><img src="01_Einfuehrung_files/figure-html/step5-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
</div>
</div>
</div>
</div>
</div>
<p>Super, wir haben jetzt also ein Grundgerüst, um eine Grafik zu erstellen. Wichtig ist mir dabei, dass du folgende Dinge mitgenommen hast:</p>
<ul>
<li><p>Das sogennante <code>mapping</code> bestimmt was auf unsere Leinwand gezeichnet wird. Ohne <code>mapping</code> bleibt unser Plot leer. Deswegen passiert in Schritt 1 noch nicht viel in unserem Bild.</p></li>
<li><p>Immer wenn wir irgendwelche Texte angeben (wie bei der Farbe oder der Achsenbeschriftung), müssen wir Anführungszeichen verwenden. Es spielt dabei keine Rolle, ob wir <code>""</code> oder <code>''</code> verwenden (solange wir am Anfang und Ende vom Text das gleiche Zeichen nehmen).</p></li>
<li><p>Die daten- bzw. vektorabhängigen Teile unseres Plots werden durch das <code>mapping</code> bestimmt. Dieses müssen wir durch eine Hilfsfunktion <code>aes()</code> angeben. Diesen Syntax müssen wir jetzt erstmal so akzeptieren.</p></li>
<li><p>Die Teile unseres Plots, die unabhängig von unseren Daten sind (in diesem Fall Farbe, Größe und Transparenz der Punkte) wird <strong>innerhalb</strong> <code>geom_point()</code>, aber <strong>außerhalb</strong> vom <code>mapping</code> bzw. <code>aes()</code> gesetzt.</p></li>
<li><p>Unser Datensatz enthält <code>NA</code>s. Deswegen generiert <code>ggplot()</code> jedes Mal eine Warnung, dass Beobachtungen entfernt wurden.</p></li>
</ul>
<p>Machen wir nun unsere Grafik ein bisschen informativer. Die Punkte sollen nicht alle die gleiche Farbe haben. Es wäre vielleicht interessant zu sehen, ob es einen Unterschied zwischen Pinguinen unterschiedlicher Spezien hinsichtlich ihrer Schnabel- oder Flossenlänge gibt. Lasst uns also eine Grafik erstellen, die mehrere Farben verwendet. Dies könnte so aussehen.</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="01_Einfuehrung_files/figure-html/unnamed-chunk-22-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Offensichlich gibt es hier klare Gruppierungen. Lasst uns diese Grafik nachbauen. Dazu müssen wir unser Grundgerüst von eben ein wenig anpassen.</p>
<ol type="1">
<li><p>Lösche die Farbzuweisung <code>color = "dodgerblue4"</code></p></li>
<li><p>Weise dem color-mapping <strong>innerhalb</strong> von <code>aes()</code> den Vektor <code>penguins$species</code> zu. Dies mag einem vielleicht zunächst merkwürdig vorkommen. Ich erkläre nachher was hier passiert.</p></li>
<li><p>Ergänze die <code>labs()</code>-Schicht, um <code>color = "Spezies"</code>.</p></li>
</ol>
<div class="panel-tabset column-page">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-2-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-1" role="tab" aria-controls="tabset-2-1" aria-selected="true" href="">Schritt 1</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-2" role="tab" aria-controls="tabset-2-2" aria-selected="false" href="">Schritt 2</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-3" role="tab" aria-controls="tabset-2-3" aria-selected="false" href="">Schritt 3</a></li></ul>
<div class="tab-content">
<div id="tabset-2-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-2-1-tab">
<div class="columns">
<div class="column" style="width:50%;">
<section id="input-5" class="level3">
<h3 class="anchored" data-anchor-id="input-5">Input</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(</span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">mapping =</span> <span class="fu">aes</span>(</span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a>      <span class="at">x =</span> penguins<span class="sc">$</span>bill_length_mm,</span>
<span id="cb49-5"><a href="#cb49-5" aria-hidden="true" tabindex="-1"></a>      <span class="at">y =</span> penguins<span class="sc">$</span>flipper_length_mm</span>
<span id="cb49-6"><a href="#cb49-6" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb49-7"><a href="#cb49-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">size =</span> <span class="dv">3</span>,</span>
<span id="cb49-8"><a href="#cb49-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">alpha =</span> <span class="fl">0.75</span></span>
<span id="cb49-9"><a href="#cb49-9" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb49-10"><a href="#cb49-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb49-11"><a href="#cb49-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">'Schnabellänge (in mm)'</span>, </span>
<span id="cb49-12"><a href="#cb49-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">'Flossenlänge (in mm)'</span></span>
<span id="cb49-13"><a href="#cb49-13" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</div><div class="column" style="width:50%;">
<section id="output-5" class="level3">
<h3 class="anchored" data-anchor-id="output-5">Output</h3>
<div class="cell">
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 2 rows containing missing values (geom_point).</code></pre>
</div>
<div class="cell-output-display">
<p><img src="01_Einfuehrung_files/figure-html/step1a-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
</div>
</div>
</div>
<div id="tabset-2-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-2-tab">
<div class="columns">
<div class="column" style="width:50%;">
<section id="input-6" class="level3">
<h3 class="anchored" data-anchor-id="input-6">Input</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(</span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">mapping =</span> <span class="fu">aes</span>(</span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a>      <span class="at">x =</span> penguins<span class="sc">$</span>bill_length_mm,</span>
<span id="cb51-5"><a href="#cb51-5" aria-hidden="true" tabindex="-1"></a>      <span class="at">y =</span> penguins<span class="sc">$</span>flipper_length_mm,</span>
<span id="cb51-6"><a href="#cb51-6" aria-hidden="true" tabindex="-1"></a>      <span class="at">color =</span> penguins<span class="sc">$</span>species</span>
<span id="cb51-7"><a href="#cb51-7" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb51-8"><a href="#cb51-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">size =</span> <span class="dv">3</span>,</span>
<span id="cb51-9"><a href="#cb51-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">alpha =</span> <span class="fl">0.75</span></span>
<span id="cb51-10"><a href="#cb51-10" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb51-11"><a href="#cb51-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb51-12"><a href="#cb51-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">'Schnabellänge (in mm)'</span>, </span>
<span id="cb51-13"><a href="#cb51-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">'Flossenlänge (in mm)'</span></span>
<span id="cb51-14"><a href="#cb51-14" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</div><div class="column" style="width:50%;">
<section id="output-6" class="level3">
<h3 class="anchored" data-anchor-id="output-6">Output</h3>
<div class="cell">
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 2 rows containing missing values (geom_point).</code></pre>
</div>
<div class="cell-output-display">
<p><img src="01_Einfuehrung_files/figure-html/step2a-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
</div>
</div>
</div>
<div id="tabset-2-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-3-tab">
<div class="columns">
<div class="column" style="width:50%;">
<section id="input-7" class="level3">
<h3 class="anchored" data-anchor-id="input-7">Input</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(</span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">mapping =</span> <span class="fu">aes</span>(</span>
<span id="cb53-4"><a href="#cb53-4" aria-hidden="true" tabindex="-1"></a>      <span class="at">x =</span> penguins<span class="sc">$</span>bill_length_mm,</span>
<span id="cb53-5"><a href="#cb53-5" aria-hidden="true" tabindex="-1"></a>      <span class="at">y =</span> penguins<span class="sc">$</span>flipper_length_mm,</span>
<span id="cb53-6"><a href="#cb53-6" aria-hidden="true" tabindex="-1"></a>      <span class="at">color =</span> penguins<span class="sc">$</span>species</span>
<span id="cb53-7"><a href="#cb53-7" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb53-8"><a href="#cb53-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">size =</span> <span class="dv">3</span>,</span>
<span id="cb53-9"><a href="#cb53-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">alpha =</span> <span class="fl">0.75</span></span>
<span id="cb53-10"><a href="#cb53-10" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb53-11"><a href="#cb53-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb53-12"><a href="#cb53-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">'Schnabellänge (in mm)'</span>, </span>
<span id="cb53-13"><a href="#cb53-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">'Flossenlänge (in mm)'</span>,</span>
<span id="cb53-14"><a href="#cb53-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">'Spezies'</span></span>
<span id="cb53-15"><a href="#cb53-15" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</div><div class="column" style="width:50%;">
<section id="output-7" class="level3">
<h3 class="anchored" data-anchor-id="output-7">Output</h3>
<div class="cell">
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 2 rows containing missing values (geom_point).</code></pre>
</div>
<div class="cell-output-display">
<p><img src="01_Einfuehrung_files/figure-html/step3a-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
</div>
</div>
</div>
</div>
</div>
<p>Lasst uns nochmal über Schritt 2 reden. In diesem Schrit haben wir für <code>color</code> gar keine Farben angegeben. Schließlich enthält der Vektor <code>penguins$species</code> nur die Wörter Adelie, Gentoo und Chinstrap. Ich bin zwar kein Experte, aber das klingt nicht nach Farben.</p>
<p>Aber <code>aes()</code> erwartet auch gar keine Farben. Stattdessen sollen wir nur Daten angeben. Ihr erinnert euch? Datenabhängige Teile der Grafik kommen ins <code>aes()</code>. Und genau das haben wir gemacht.</p>
<p>Und woher kommen dann die Farben? Das ist das Werk von <code>ggplot()</code>. Es übernimmt die Farbzuweisung selbstständig. Dazu überprüft es, wie viele verschiedene Texte es in dem von uns angegebenen Vektor gibt (in diesem Fall ist der Vetkor <code>penguins$species</code>). Anschließend weist <code>ggplot()</code> jedem Text (in diesem Fall jeder Spezies) eine Farbe zu. Wir könnten theoretisch <code>ggplot()</code> auch noch genau vorgeben, welche Farbe es zu verwenden hat. Aber das wäre jetzt zu viel des Guten.</p>
<p>Abschließend lasst uns unseren Code noch einmal vereinfachen. Ihr habt vielleicht schon festgestellt, dass wir ständig <code>penguins$</code> in unserem Code geschrieben haben. Das kann schnell mühselig werden. Wir können in <code>geom_point()</code> aber einfach <code>data = penguins</code> setzen. Dann weiß <code>ggplot()</code>, dass es die entsprechenden Vektoren finden kann, indem es selbst <code>penguins$</code> vor unsere Angaben setzt. Das ganze sieht dann so aus.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(</span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> penguins,</span>
<span id="cb55-4"><a href="#cb55-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">mapping =</span> <span class="fu">aes</span>(</span>
<span id="cb55-5"><a href="#cb55-5" aria-hidden="true" tabindex="-1"></a>      <span class="at">x =</span> bill_length_mm,</span>
<span id="cb55-6"><a href="#cb55-6" aria-hidden="true" tabindex="-1"></a>      <span class="at">y =</span> flipper_length_mm,</span>
<span id="cb55-7"><a href="#cb55-7" aria-hidden="true" tabindex="-1"></a>      <span class="at">color =</span> species</span>
<span id="cb55-8"><a href="#cb55-8" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb55-9"><a href="#cb55-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">size =</span> <span class="dv">3</span>,</span>
<span id="cb55-10"><a href="#cb55-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">alpha =</span> <span class="fl">0.75</span></span>
<span id="cb55-11"><a href="#cb55-11" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb55-12"><a href="#cb55-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb55-13"><a href="#cb55-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">'Schnabellänge (in mm)'</span>, </span>
<span id="cb55-14"><a href="#cb55-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">'Flossenlänge (in mm)'</span>,</span>
<span id="cb55-15"><a href="#cb55-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">'Spezies'</span></span>
<span id="cb55-16"><a href="#cb55-16" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 2 rows containing missing values (geom_point).</code></pre>
</div>
<div class="cell-output-display">
<p><img src="01_Einfuehrung_files/figure-html/unnamed-chunk-23-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<section id="berechnete-größen-visualisieren" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="berechnete-größen-visualisieren">Berechnete Größen visualisieren</h2>
<p>Lasst uns nun unsere Penguine zählen. Schauen wir dazu doch noch einmal in unseren Datensatz.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a>penguins</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 344 × 8
   species island    bill_length_mm bill_depth_mm flipper_…¹ body_…² sex    year
   &lt;fct&gt;   &lt;fct&gt;              &lt;dbl&gt;         &lt;dbl&gt;      &lt;int&gt;   &lt;int&gt; &lt;fct&gt; &lt;int&gt;
 1 Adelie  Torgersen           39.1          18.7        181    3750 male   2007
 2 Adelie  Torgersen           39.5          17.4        186    3800 fema…  2007
 3 Adelie  Torgersen           40.3          18          195    3250 fema…  2007
 4 Adelie  Torgersen           NA            NA           NA      NA &lt;NA&gt;   2007
 5 Adelie  Torgersen           36.7          19.3        193    3450 fema…  2007
 6 Adelie  Torgersen           39.3          20.6        190    3650 male   2007
 7 Adelie  Torgersen           38.9          17.8        181    3625 fema…  2007
 8 Adelie  Torgersen           39.2          19.6        195    4675 male   2007
 9 Adelie  Torgersen           34.1          18.1        193    3475 &lt;NA&gt;   2007
10 Adelie  Torgersen           42            20.2        190    4250 &lt;NA&gt;   2007
# … with 334 more rows, and abbreviated variable names ¹​flipper_length_mm,
#   ²​body_mass_g</code></pre>
</div>
</div>
<p>In der Spalte <code>island</code> sehen wir, auf welcher Insel die Penguine leben. Wir könnten ja mal gucken, wie viele Penguine auf den verschiedenen Inseln leben. Dies könnte so aussehen.</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="01_Einfuehrung_files/figure-html/unnamed-chunk-25-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Wenn wir hier ähnlich wie bei den Punktdiagrammen vorgehen wollen, stellen wir ziemlich schnell zwei Dinge fest:</p>
<ol type="1">
<li><p>Wir haben noch gar keinen blassen Schimmer wie man solche Balken zeichnet. Bisher haben wir ja nur Punkte gezeichnet.</p></li>
<li><p>In unserem <code>mapping = aes(x = ..., y = ...)</code> wäre nur der <code>y</code>-Teil klar. Schließlich ist <code>island</code> in unserem Datensatz vorhanden. Aber die Anzahl steht in keiner Spalte unseres Datensatzes.</p></li>
</ol>
<p>Beide Probleme lassen sich mit <code>geom_bar()</code> lösen. Diese Funktion benötigt, jeweils nur ein mapping (<code>x</code> oder <code>y</code>) und zählt dann den Rest selbst. Die obige Grafik wird also durch den folgenden Code erzeugt.</p>
<div class="cell page-columns page-full">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(</span>
<span id="cb59-3"><a href="#cb59-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> penguins,</span>
<span id="cb59-4"><a href="#cb59-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">y =</span> island), </span>
<span id="cb59-5"><a href="#cb59-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill =</span> <span class="st">'dodgerblue4'</span></span>
<span id="cb59-6"><a href="#cb59-6" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb59-7"><a href="#cb59-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb59-8"><a href="#cb59-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">'Anzahl der Penguine'</span>,</span>
<span id="cb59-9"><a href="#cb59-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">'Insel'</span></span>
<span id="cb59-10"><a href="#cb59-10" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display page-columns page-full">
<div id="fig-penguins-island" class="quarto-figure quarto-figure-center anchored page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="01_Einfuehrung_files/figure-html/fig-penguins-island-1.png" class="img-fluid figure-img" width="672"></p>
<p></p><figcaption class="figure-caption margin-caption">Abbildung&nbsp;1: Anzahl der Penguine pro Insel</figcaption><p></p>
</figure>
</div>
</div>
</div>
<p>Beachte, dass wir hier <code>fill</code> statt <code>color</code> verwendet haben. Dies liegt daran, dass bei Balkendiagrammen <code>color</code> die Umrandung beinflusst und <code>fill</code> das Innere des Balken.</p>
<p>Analog zu dem Punktdiagramm könnten wir auch jede Spezies einzeln zählen. Dazu mappen wir <code>fill = species</code>.</p>
<div class="cell page-columns page-full">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(</span>
<span id="cb60-3"><a href="#cb60-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> penguins,</span>
<span id="cb60-4"><a href="#cb60-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">y =</span> island, <span class="at">fill =</span> species), </span>
<span id="cb60-5"><a href="#cb60-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">width =</span> <span class="fl">0.5</span> <span class="co"># Macht die Balken bisschen schmaller</span></span>
<span id="cb60-6"><a href="#cb60-6" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb60-7"><a href="#cb60-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb60-8"><a href="#cb60-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">'Anzahl der Penguine'</span>,</span>
<span id="cb60-9"><a href="#cb60-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">'Insel'</span></span>
<span id="cb60-10"><a href="#cb60-10" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display page-columns page-full">
<div id="fig-penguins-island-by-species" class="quarto-figure quarto-figure-center anchored page-columns page-full">
<figure class="figure page-columns page-full">
<p><img src="01_Einfuehrung_files/figure-html/fig-penguins-island-by-species-1.png" class="img-fluid figure-img" width="672"></p>
<p></p><figcaption class="figure-caption margin-caption">Abbildung&nbsp;2: Anzahl der Penguine pro Insel und Spezies</figcaption><p></p>
</figure>
</div>
</div>
</div>
<p>Wir sehen also, dass <code>ggplot</code> auch in der Lage ist, Berechnungen für uns durchzuführen, bevor die Leinwand bemalt wird. Eine andere Möglichkeit, um <code>ggplot</code> rechnen zu lassen, sind Histogramme. Beispielsweise ist hier ein Histogramm für das Gewicht der Penguine.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(sex)) <span class="sc">|&gt;</span> </span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> body_mass_g)) <span class="sc">+</span></span>
<span id="cb61-4"><a href="#cb61-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>() <span class="sc">+</span></span>
<span id="cb61-5"><a href="#cb61-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">'Körpergewicht (in g)'</span>, <span class="at">y =</span> <span class="st">'Anzahl'</span>)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
</div>
<div class="cell-output-display">
<p><img src="01_Einfuehrung_files/figure-html/unnamed-chunk-28-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Bei einem Histogramm wird das Intervall von der kleinsten bis zur größten beobachteten Größe in gleichgroße Teile geteilt. Anschließend wird gezählt, wie oft Beobachtungen in diese Teilbereiche fallen. In diesem Fall wurde das Gewicht von 2700 bis 6300 in 30 Teile aufgeteilt. Dies seht ihr an der <code>bins = 30</code> Mitteilung. Ihr könnt ja mal versuchen, diese Größe zu verändern.</p>
</section>
</section>
<section id="eigene-berechnungen-anstellen" class="level1">
<h1>Eigene Berechnungen anstellen</h1>
<p>Natürlich können wir auch selber neue Variablen mit unserem Datensatz <code>penguins</code> berechnen. Fangen wir doch mal einfach an und zählen die Penguine so wie in <a href="#fig-penguins-island">Abbildung&nbsp;1</a> und <a href="#fig-penguins-island-by-species">Abbildung&nbsp;2</a>.</p>
<section id="zusammenfassungen-mit-summarise" class="level2">
<h2 class="anchored" data-anchor-id="zusammenfassungen-mit-summarise">Zusammenfassungen mit <code>summarise()</code></h2>
<p>Zählen ist eine der einfachsten Zusammenfassungen eines Datensatzes. Allgemein benötigen wir für Zusammenfassungen die <code>summarise()</code> Funktion. Diese nimmt als erstes Argument einen Datensatz (so wie <code>penguins</code>) und danach sogenannte <code>name-value pairs</code>. Schauen wir uns das mal in Action an.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summarise</span>(</span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a>  penguins,</span>
<span id="cb63-3"><a href="#cb63-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">min_body_mass =</span> <span class="fu">min</span>(body_mass_g, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb63-4"><a href="#cb63-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">mean_flipper_length =</span> <span class="fu">mean</span>(flipper_length_mm, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb63-5"><a href="#cb63-5" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 2
  min_body_mass mean_flipper_length
          &lt;int&gt;               &lt;dbl&gt;
1          2700                201.</code></pre>
</div>
</div>
<p>Ein <code>name-value pair</code> ist also nichts anders als ein Name (surprise) und eine Berechnungsvorschrift. Der Output ist eine neue Tabelle, die unsere zwei selbstbenannten Spalten <code>min_body_mass</code> und <code>mean_flipper_length</code> enthält.</p>
<p><code>summarise()</code> macht also im Wesentlichen das gleiche, was wir im Abschnitt “Rechnen mit Vektoren” gemacht haben. Hier müssen wir allerdings nicht jedes mal <code>penguins$</code> eingeben. Indiesem Fall haben wir uns also folgendes gespart.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="fu">min</span>(penguins<span class="sc">$</span>body_mass_g, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 2700</span></span>
<span id="cb65-3"><a href="#cb65-3" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(penguins<span class="sc">$</span>flipper_length_mm, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb65-4"><a href="#cb65-4" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 200.9152</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Stattdessen müssen wir nur einmal in <code>summarise()</code> unseren Datensatz angeben. Außerdem wird unser Ergebnis als Tabelle ausgeben (anstatt als Vektor).</p>
<p>Nun können wir <code>summarise()</code> zusammen mit der <code>n()</code> Funktion benutzen, um unsere Pinguine zu zählen. Diese Funktion erwartet allerdings keine Argumente sondern gibt einfach die aktuelle Gruppengröße zurück. Bei einer normalen Tabelle wie <code>penguins</code> ist das einfach die Anzahl der Zeilen.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summarise</span>(penguins, <span class="at">Anzahl =</span> <span class="fu">n</span>())</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 1
  Anzahl
   &lt;int&gt;
1    344</code></pre>
</div>
</div>
<p>Damit uns <code>n()</code> jetzt also weiterhilft, benötigen wir noch eine letztes Werkzeug. Nämlich <code>group_by()</code>. Diese Funktion kann unsere Tabelle <code>penguins</code> gruppieren, sodass <code>summarise()</code> zusammen mit <code>n()</code> auch so zählt, wie wir das wollen. Schauen wir uns das mal an.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summarise</span>(</span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(penguins, island), </span>
<span id="cb68-3"><a href="#cb68-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">Anzahl =</span> <span class="fu">n</span>()</span>
<span id="cb68-4"><a href="#cb68-4" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 2
  island    Anzahl
  &lt;fct&gt;      &lt;int&gt;
1 Biscoe       168
2 Dream        124
3 Torgersen     52</code></pre>
</div>
</div>
<p>Dieser Code ist bisschen geschachtelt. Deswegen muss man ihn von innen nach außen lesen.</p>
<ol type="1">
<li><p><code>penguins</code> wird mittels <code>group_by()</code> anhand der Spalte <code>island</code> gruppiert.</p></li>
<li><p>Anschließend wird für jede Gruppe die Gruppengröße mit <code>n()</code> ermittelt und durch <code>summarise()</code> in eine neue Tabelle geschrieben.</p></li>
</ol>
<p>Machen wir das Ganze nochmal so wie in <a href="#fig-penguins-island-by-species">Abbildung&nbsp;2</a>. Dazu gruppieren wir nach <code>island</code> <strong>und</strong> <code>species</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summarise</span>(</span>
<span id="cb70-2"><a href="#cb70-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(penguins, island, species), </span>
<span id="cb70-3"><a href="#cb70-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">Anzahl =</span> <span class="fu">n</span>(),</span>
<span id="cb70-4"><a href="#cb70-4" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'island'. You can override using the
`.groups` argument.</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 3
# Groups:   island [3]
  island    species   Anzahl
  &lt;fct&gt;     &lt;fct&gt;      &lt;int&gt;
1 Biscoe    Adelie        44
2 Biscoe    Gentoo       124
3 Dream     Adelie        56
4 Dream     Chinstrap     68
5 Torgersen Adelie        52</code></pre>
</div>
</div>
<p>Das sind jetzt also die Zahlen, die in <a href="#fig-penguins-island-by-species">Abbildung&nbsp;2</a> berechnet und gezeichnet wurden. Außerdem stellen wir fest, dass unsere Ausgabe nun eine gruppierte Tabelle ist (gekennzeichnet durch <code>island [3]</code>). Dies ist passiert, weil wir davor anhand von zwei Variablen gruppiert haben und <code>summarise()</code> immer nur eine und nicht mehrere Gruppierungen “auflöst”.</p>
<p>Wir haben jetzt ja schon gesehen, dass gruppierte Tabellen sich anders als normale Tabellen verhalten. Dies kann manchmal ungewünschte Effekt haben. Deswegen erhalten wir auch eine Warnung, dass noch eine Gruppierung vorliegt. Lasst uns die Gruppierung also lieber komplett auflösen. Dazu setzen wir <code>.groups = "drop"</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summarise</span>(</span>
<span id="cb73-2"><a href="#cb73-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(penguins, island, species), </span>
<span id="cb73-3"><a href="#cb73-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">Anzahl =</span> <span class="fu">n</span>(),</span>
<span id="cb73-4"><a href="#cb73-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">.groups =</span> <span class="st">'drop'</span></span>
<span id="cb73-5"><a href="#cb73-5" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 3
  island    species   Anzahl
  &lt;fct&gt;     &lt;fct&gt;      &lt;int&gt;
1 Biscoe    Adelie        44
2 Biscoe    Gentoo       124
3 Dream     Adelie        56
4 Dream     Chinstrap     68
5 Torgersen Adelie        52</code></pre>
</div>
</div>
</section>
<section id="filtern-mit-filter" class="level2">
<h2 class="anchored" data-anchor-id="filtern-mit-filter">Filtern mit <code>filter()</code></h2>
<p>Wir stellen immer wieder fest, dass fehlende Werte (<code>NA</code>s) nervig sind. Beispielsweise haben wir auch im letzten Abschnitt immer wieder <code>na.rm = TRUE</code> setzen müssen. Ihr erinnert euch hoffentlich noch an den Teil hier:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summarise</span>(</span>
<span id="cb75-2"><a href="#cb75-2" aria-hidden="true" tabindex="-1"></a>  penguins,</span>
<span id="cb75-3"><a href="#cb75-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">min_body_mass =</span> <span class="fu">min</span>(body_mass_g, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb75-4"><a href="#cb75-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">mean_flipper_length =</span> <span class="fu">mean</span>(flipper_length_mm, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb75-5"><a href="#cb75-5" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Es wäre doch praktisch, wenn wir einfach die Beobachtungen mit <code>NA</code> s aussortieren könnten. Wir haben ja bereits gesehen, dass wir das mit Vektoren können:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a>some_penguin_bill_lengths <span class="ot">&lt;-</span> penguins<span class="sc">$</span>bill_length_mm[<span class="fu">seq</span>(<span class="at">from =</span> <span class="dv">4</span>, <span class="at">to =</span> <span class="dv">10</span>, <span class="at">by =</span> <span class="dv">2</span>)]</span>
<span id="cb76-2"><a href="#cb76-2" aria-hidden="true" tabindex="-1"></a>some_penguin_bill_lengths </span>
<span id="cb76-3"><a href="#cb76-3" aria-hidden="true" tabindex="-1"></a><span class="do">## [1]   NA 39.3 39.2 42.0</span></span>
<span id="cb76-4"><a href="#cb76-4" aria-hidden="true" tabindex="-1"></a>some_penguin_bill_lengths[<span class="sc">!</span><span class="fu">is.na</span>(some_penguin_bill_lengths)]</span>
<span id="cb76-5"><a href="#cb76-5" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 39.3 39.2 42.0</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Das gleiche geht mit unserer Tabelle auch. Dazu können wir die <code>filter()</code> Funktion benutzen. Diese Funktion benötigt als erstes Argument eine Tabelle (<code>penguins</code> in unserem Fall) und anschließend Filterbedingungen. Solche Filterbedingungen funktionieren genauso wie für Vektoren (siehe Abschnitt “Wahrheitsvektoren”).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(penguins, body_mass_g <span class="sc">&gt;</span> <span class="dv">3500</span>)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 264 × 8
   species island    bill_length_mm bill_depth_mm flipper_…¹ body_…² sex    year
   &lt;fct&gt;   &lt;fct&gt;              &lt;dbl&gt;         &lt;dbl&gt;      &lt;int&gt;   &lt;int&gt; &lt;fct&gt; &lt;int&gt;
 1 Adelie  Torgersen           39.1          18.7        181    3750 male   2007
 2 Adelie  Torgersen           39.5          17.4        186    3800 fema…  2007
 3 Adelie  Torgersen           39.3          20.6        190    3650 male   2007
 4 Adelie  Torgersen           38.9          17.8        181    3625 fema…  2007
 5 Adelie  Torgersen           39.2          19.6        195    4675 male   2007
 6 Adelie  Torgersen           42            20.2        190    4250 &lt;NA&gt;   2007
 7 Adelie  Torgersen           37.8          17.3        180    3700 &lt;NA&gt;   2007
 8 Adelie  Torgersen           38.6          21.2        191    3800 male   2007
 9 Adelie  Torgersen           34.6          21.1        198    4400 male   2007
10 Adelie  Torgersen           36.6          17.8        185    3700 fema…  2007
# … with 254 more rows, and abbreviated variable names ¹​flipper_length_mm,
#   ²​body_mass_g</code></pre>
</div>
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(penguins, species <span class="sc">==</span> <span class="st">"Gentoo"</span>)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 124 × 8
   species island bill_length_mm bill_depth_mm flipper_len…¹ body_…² sex    year
   &lt;fct&gt;   &lt;fct&gt;           &lt;dbl&gt;         &lt;dbl&gt;         &lt;int&gt;   &lt;int&gt; &lt;fct&gt; &lt;int&gt;
 1 Gentoo  Biscoe           46.1          13.2           211    4500 fema…  2007
 2 Gentoo  Biscoe           50            16.3           230    5700 male   2007
 3 Gentoo  Biscoe           48.7          14.1           210    4450 fema…  2007
 4 Gentoo  Biscoe           50            15.2           218    5700 male   2007
 5 Gentoo  Biscoe           47.6          14.5           215    5400 male   2007
 6 Gentoo  Biscoe           46.5          13.5           210    4550 fema…  2007
 7 Gentoo  Biscoe           45.4          14.6           211    4800 fema…  2007
 8 Gentoo  Biscoe           46.7          15.3           219    5200 male   2007
 9 Gentoo  Biscoe           43.3          13.4           209    4400 fema…  2007
10 Gentoo  Biscoe           46.8          15.4           215    5150 male   2007
# … with 114 more rows, and abbreviated variable names ¹​flipper_length_mm,
#   ²​body_mass_g</code></pre>
</div>
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(penguins, <span class="sc">!</span><span class="fu">is.na</span>(sex))</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 333 × 8
   species island    bill_length_mm bill_depth_mm flipper_…¹ body_…² sex    year
   &lt;fct&gt;   &lt;fct&gt;              &lt;dbl&gt;         &lt;dbl&gt;      &lt;int&gt;   &lt;int&gt; &lt;fct&gt; &lt;int&gt;
 1 Adelie  Torgersen           39.1          18.7        181    3750 male   2007
 2 Adelie  Torgersen           39.5          17.4        186    3800 fema…  2007
 3 Adelie  Torgersen           40.3          18          195    3250 fema…  2007
 4 Adelie  Torgersen           36.7          19.3        193    3450 fema…  2007
 5 Adelie  Torgersen           39.3          20.6        190    3650 male   2007
 6 Adelie  Torgersen           38.9          17.8        181    3625 fema…  2007
 7 Adelie  Torgersen           39.2          19.6        195    4675 male   2007
 8 Adelie  Torgersen           41.1          17.6        182    3200 fema…  2007
 9 Adelie  Torgersen           38.6          21.2        191    3800 male   2007
10 Adelie  Torgersen           34.6          21.1        198    4400 male   2007
# … with 323 more rows, and abbreviated variable names ¹​flipper_length_mm,
#   ²​body_mass_g</code></pre>
</div>
</div>
<p>Auch hier wurden Vektoren benutzt wie wir es im Abschnitt “Wahrheitsvektoren” gelernt haben. Spielen wir das Ganze mal für unser erstes Beispiel durch. Hier passiert folgendes.</p>
<ol type="1">
<li><p>Es wird <code>penguins$body_mass_g &gt; 3500</code> (ein <code>TRUE</code>/<code>FALSE</code>-Vektor) berechnet</p></li>
<li><p>Anschließend werden nur die Zeilen im Datensatz verwendet, für die der vorherige Vektor <code>TRUE</code> geliefert hat.</p></li>
</ol>
<p>Jetzt könnten wir also unsere <code>summarise()</code>-Berechnung von vorhin ohne das <code>na.rm = TRUE</code> durchführen.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summarise</span>(</span>
<span id="cb83-2"><a href="#cb83-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(penguins, <span class="sc">!</span><span class="fu">is.na</span>(sex)),</span>
<span id="cb83-3"><a href="#cb83-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">min_body_mass =</span> <span class="fu">min</span>(body_mass_g),</span>
<span id="cb83-4"><a href="#cb83-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">mean_flipper_length =</span> <span class="fu">mean</span>(flipper_length_mm)</span>
<span id="cb83-5"><a href="#cb83-5" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 2
  min_body_mass mean_flipper_length
          &lt;int&gt;               &lt;dbl&gt;
1          2700                201.</code></pre>
</div>
</div>
</section>
<section id="vermeiden-von-code-schachtelungen" class="level2">
<h2 class="anchored" data-anchor-id="vermeiden-von-code-schachtelungen">Vermeiden von Code-Schachtelungen</h2>
<p>Wir könnten das auch für jede Insel und jede Spezies separat machen. Dafür haben wir ja gerade eben <code>group_by()</code> kennengelernt. Wir müssten also</p>
<ol type="1">
<li>filtern mit <code>filter()</code>,</li>
<li>gruppieren mit <code>group_by()</code>,</li>
<li>zusammenfassen mit <code>summarise()</code>.</li>
</ol>
<p>Der entsprechende Code könnte so aussehen.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb85"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summarise</span>(</span>
<span id="cb85-2"><a href="#cb85-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(<span class="fu">filter</span>(penguins, <span class="sc">!</span><span class="fu">is.na</span>(sex)), species, island),</span>
<span id="cb85-3"><a href="#cb85-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">min_body_mass =</span> <span class="fu">min</span>(body_mass_g),</span>
<span id="cb85-4"><a href="#cb85-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">mean_flipper_length =</span> <span class="fu">mean</span>(flipper_length_mm),</span>
<span id="cb85-5"><a href="#cb85-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">.groups =</span> <span class="st">"drop"</span></span>
<span id="cb85-6"><a href="#cb85-6" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 4
  species   island    min_body_mass mean_flipper_length
  &lt;fct&gt;     &lt;fct&gt;             &lt;int&gt;               &lt;dbl&gt;
1 Adelie    Biscoe             2850                189.
2 Adelie    Dream              2900                190.
3 Adelie    Torgersen          2900                192.
4 Chinstrap Dream              2700                196.
5 Gentoo    Biscoe             3950                217.</code></pre>
</div>
</div>
<p>Vielleicht findest du diesen Code ziemlich verwirrend und unübersichtlich. Ich würde dir da zustimmen. Für mich persönlich ist da viel zu viel geschachtelteter Code. Es wäre schön, wenn man den Code, wie in meiner vorherigen Aufzählung schreiben könnte.</p>
<p>Und tatsächlich kann man das. Dazu kann man die sogenannte Pipe <code>|&gt;</code> verwenden. Sie nimmt den Output einer vorherigen Funktion und schickt sie an die erste Stelle der nachfolgenden Funktion.</p>
<p>Dies funktioniert für die hier verwendeten Funktionen super, denn</p>
<ul>
<li>jede dieser Funktionen erwartet an erster Stelle eine Tabelle</li>
<li>jede dieser Funktionen gibt eine Tabelle aus</li>
</ul>
<p>So sieht dann der gleiche code “gepiped” aus.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb87"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb87-2"><a href="#cb87-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(sex)) <span class="sc">|&gt;</span> </span>
<span id="cb87-3"><a href="#cb87-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(species, island) <span class="sc">|&gt;</span> </span>
<span id="cb87-4"><a href="#cb87-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb87-5"><a href="#cb87-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">min_body_mass =</span> <span class="fu">min</span>(body_mass_g),</span>
<span id="cb87-6"><a href="#cb87-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">mean_flipper_length =</span> <span class="fu">mean</span>(flipper_length_mm),</span>
<span id="cb87-7"><a href="#cb87-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">.groups =</span> <span class="st">"drop"</span></span>
<span id="cb87-8"><a href="#cb87-8" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 4
  species   island    min_body_mass mean_flipper_length
  &lt;fct&gt;     &lt;fct&gt;             &lt;int&gt;               &lt;dbl&gt;
1 Adelie    Biscoe             2850                189.
2 Adelie    Dream              2900                190.
3 Adelie    Torgersen          2900                192.
4 Chinstrap Dream              2700                196.
5 Gentoo    Biscoe             3950                217.</code></pre>
</div>
</div>
<p>Ihr müsst die Pipe auch nicht händisch tippen. Mit der Kombination <code>strg</code> + <code>shift</code> + <code>M</code> wirft RStudio die Pipe für euch. Bei euch könnte die Pipe allerdings dann wie <code>%&gt;%</code> aussehen. Das ist die “alte” Pipe. Ihr könnt in RStudio unter <code>Tools</code> &gt; <code>Global Options</code> &gt; <code>Code</code> &gt; <code>Use native pipe operator</code> die “neue” Pipe verwenden.</p>
</section>
<section id="auswählen-von-spalten-mit-select" class="level2">
<h2 class="anchored" data-anchor-id="auswählen-von-spalten-mit-select">Auswählen von Spalten mit <code>select()</code></h2>
<p>Für gewöhnlich will man nur einen Teil der Spalten eines Datensatzes angucken. Mit der <code>select()</code>-Funktion kann man sich leicht auf die relevanten Spalten beschränken. Auch die <code>select()</code>-Funktion erwartet an erster Stelle eine Tabelle und ist daher sehr “pipe-freundlich”.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb89"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb89-2"><a href="#cb89-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(sex, flipper_length_mm, bill_length_mm, body_mass_g)</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 344 × 4
   sex    flipper_length_mm bill_length_mm body_mass_g
   &lt;fct&gt;              &lt;int&gt;          &lt;dbl&gt;       &lt;int&gt;
 1 male                 181           39.1        3750
 2 female               186           39.5        3800
 3 female               195           40.3        3250
 4 &lt;NA&gt;                  NA           NA            NA
 5 female               193           36.7        3450
 6 male                 190           39.3        3650
 7 female               181           38.9        3625
 8 male                 195           39.2        4675
 9 &lt;NA&gt;                 193           34.1        3475
10 &lt;NA&gt;                 190           42          4250
# … with 334 more rows</code></pre>
</div>
</div>
<p>Wie wir nun wissen, können wir diese Tabelle auch gleich um die fehlenden Werte bereinigen. Am besten speichern wir diese Tabelle auch in eine Variable ab. Dann können wir mit dieser neuen Tabelle in anderen Berechnungen weiterarbeiten.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb91"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a>selected_penguins <span class="ot">&lt;-</span> penguins <span class="sc">|&gt;</span> </span>
<span id="cb91-2"><a href="#cb91-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(sex, flipper_length_mm, bill_length_mm, body_mass_g) <span class="sc">|&gt;</span> </span>
<span id="cb91-3"><a href="#cb91-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(sex))</span>
<span id="cb91-4"><a href="#cb91-4" aria-hidden="true" tabindex="-1"></a>selected_penguins</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 333 × 4
   sex    flipper_length_mm bill_length_mm body_mass_g
   &lt;fct&gt;              &lt;int&gt;          &lt;dbl&gt;       &lt;int&gt;
 1 male                 181           39.1        3750
 2 female               186           39.5        3800
 3 female               195           40.3        3250
 4 female               193           36.7        3450
 5 male                 190           39.3        3650
 6 female               181           38.9        3625
 7 male                 195           39.2        4675
 8 female               182           41.1        3200
 9 male                 191           38.6        3800
10 male                 198           34.6        4400
# … with 323 more rows</code></pre>
</div>
</div>
</section>
<section id="neue-spalten-mit-mutate" class="level2">
<h2 class="anchored" data-anchor-id="neue-spalten-mit-mutate">Neue Spalten mit <code>mutate()</code></h2>
<p>Eine alte “Weisheit”<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a> besagt “Wie die Nase eines Mannes, so sein…”. In Anlehnung an diese Aussage, lasst uns doch mal für unsere Penguine Schnabel- und Flossenlänge ins Verhältnis setzen. Mit Vektoren geht das kinderleicht:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb93"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a>selected_penguins<span class="sc">$</span>flipper_length_mm <span class="sc">/</span> selected_penguins<span class="sc">$</span>bill_length_mm</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  [1] 4.629156 4.708861 4.838710 5.258856 4.834606 4.652956 4.974490 4.428224
  [9] 4.948187 5.722543 5.054645 5.038760 4.635294 5.348837 4.217391 4.603175
 [17] 4.774536 5.264624 4.842932 4.639175 5.297450 4.507389 4.617284 4.538259
 [25] 4.444444 4.506329 4.784946 4.759494 4.498778 5.357143 5.000000 4.896907
 [33] 4.265403 4.813830 4.623116 4.986301 4.779412 5.166667 4.444444 5.000000
 [41] 4.797980 4.428224 5.277778 4.515366 4.696970 4.688279 5.428571 4.761905
 [49] 5.420290 4.613527 4.769231 4.753695 4.958904 5.159574 5.182073 4.721550
 [57] 4.920213 4.671533 5.054945 4.615385 5.492958 4.574209 5.292479 4.736842
 [65] 5.671642 4.785894 4.949495 4.301310 5.352113 4.556075 4.669927 4.946237
 [73] 5.165746 4.631829 5.462428 4.568765 5.095368 5.498575 5.120643 4.697337
 [81] 5.234160 5.121951 4.934726 4.884319 5.658263 4.987835 5.441176 4.696970
 [89] 5.165746 5.098039 4.986877 4.863524 5.377644 4.444444 5.485714 4.951220
 [97] 4.854111 5.026455 5.092348 4.634761 5.155440 4.973822 4.750656 4.560185
[105] 5.196850 4.188596 4.861461 4.668246 4.823232 4.590164 4.870466 5.335121
[113] 5.294118 4.598540 5.165746 5.251989 4.378109 4.879227 5.284091 4.901478
[121] 4.922680 4.698795 4.897436 4.761905 4.935065 4.570766 5.244565 5.306667
[129] 4.908136 4.622871 5.365169 4.975124 5.000000 4.861461 4.800995 4.605911
[137] 5.856698 4.668305 5.147453 4.743590 4.846939 5.027322 5.416667 5.105820
[145] 5.194444 4.843373 4.577007 4.600000 4.312115 4.360000 4.516807 4.516129
[153] 4.647577 4.689507 4.826790 4.594017 5.232274 4.408163 4.703297 4.400826
[161] 4.585153 4.401623 5.000000 4.491870 4.523810 4.558522 4.342629 4.767184
[169] 4.580645 4.643629 5.011655 4.663774 4.497908 4.356846 4.400000 4.693446
[177] 4.883178 4.589800 3.859060 4.480652 4.545455 5.000000 4.932432 4.727273
[185] 4.271047 4.871194 4.536290 4.635762 4.354839 4.396040 4.977064 4.615385
[193] 4.455446 4.743875 4.756637 4.506438 4.536082 4.656319 4.491018 4.666667
[201] 4.888889 4.748858 4.835165 4.814815 4.444444 4.591611 4.783550 4.682713
[209] 4.254144 4.781659 4.618474 4.626263 5.057471 4.398422 4.528302 4.762931
[217] 4.585062 4.666667 4.655172 4.732510 4.400000 4.305284 4.756637 4.933628
[225] 4.317719 4.209524 4.472574 4.480000 4.721604 4.488189 5.023041 4.249513
[233] 4.463158 4.414587 4.589474 4.367816 4.659341 4.525253 4.808989 4.448819
[241] 4.372470 4.733475 4.194215 4.403131 4.515464 4.078712 4.555085 4.643585
[249] 4.594017 5.035971 4.101124 4.803695 4.345114 4.277228 4.598394 4.896552
[257] 4.466019 4.696970 4.174229 4.549180 4.533898 4.594017 4.404762 4.690265
[265] 4.268537 4.129032 3.920000 3.762183 4.140969 3.738140 4.380531 3.861171
[273] 3.840156 4.239130 3.859649 4.141631 3.752418 3.936170 3.865385 4.139434
[281] 3.980198 3.916501 3.120690 4.094828 3.963415 4.268868 3.938144 4.328704
[289] 3.814229 4.175589 3.788462 3.960396 4.040404 4.116379 3.882576 4.572127
[297] 3.708487 4.400000 3.980392 3.923541 4.189474 4.096639 4.038462 4.093817
[305] 3.831776 4.285714 4.047619 3.850688 4.307692 3.850688 3.956693 3.792415
[313] 4.326531 3.631068 3.975904 4.137214 3.910506 4.223195 4.003945 4.400000
[321] 3.773946 4.225664 4.117647 4.023904 4.254386 3.969171 4.038462 4.266958
[329] 3.709677 4.643678 3.891129 4.133858 3.944223</code></pre>
</div>
</div>
<p>Das war jetzt zwar einfach, aber der Output lässt zu Wünschen übrig. Außerdem ist es dezent nervig, dass ich mehrfach <code>selected_penguins$</code> tippen musste. Hätten wir eine komplizierte Rechnung durchgeführt, hätte ich das vermutlich noch öfter tippen müssen.</p>
<p>Aber nicht mit mir! Mit <code>mutate()</code> kann man sich viel Tipparbeit sparen und hat auch gleich wieder einen Tabellenoutput. Außerdem kann man so gleich mehrere Berechnungen in einem Abwasch machen.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb95"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a>mutierte_pinguine <span class="ot">&lt;-</span> selected_penguins <span class="sc">|&gt;</span> </span>
<span id="cb95-2"><a href="#cb95-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb95-3"><a href="#cb95-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">ratio =</span> flipper_length_mm <span class="sc">/</span> bill_length_mm,</span>
<span id="cb95-4"><a href="#cb95-4" aria-hidden="true" tabindex="-1"></a>    ratio_groeßer<span class="at">_5 =</span> (ratio <span class="sc">&gt;</span> <span class="dv">5</span>)</span>
<span id="cb95-5"><a href="#cb95-5" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb95-6"><a href="#cb95-6" aria-hidden="true" tabindex="-1"></a>mutierte_pinguine</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 333 × 6
   sex    flipper_length_mm bill_length_mm body_mass_g ratio ratio_groeßer_5
   &lt;fct&gt;              &lt;int&gt;          &lt;dbl&gt;       &lt;int&gt; &lt;dbl&gt; &lt;lgl&gt;          
 1 male                 181           39.1        3750  4.63 FALSE          
 2 female               186           39.5        3800  4.71 FALSE          
 3 female               195           40.3        3250  4.84 FALSE          
 4 female               193           36.7        3450  5.26 TRUE           
 5 male                 190           39.3        3650  4.83 FALSE          
 6 female               181           38.9        3625  4.65 FALSE          
 7 male                 195           39.2        4675  4.97 FALSE          
 8 female               182           41.1        3200  4.43 FALSE          
 9 male                 191           38.6        3800  4.95 FALSE          
10 male                 198           34.6        4400  5.72 TRUE           
# … with 323 more rows</code></pre>
</div>
</div>
<p>Diesen neuen Datensatz könnten wir nun nehmen und ein Histogramm pro Geschlecht erzeugen.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb97"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb97-2"><a href="#cb97-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(</span>
<span id="cb97-3"><a href="#cb97-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> mutierte_pinguine,</span>
<span id="cb97-4"><a href="#cb97-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> ratio, <span class="at">fill =</span> sex)</span>
<span id="cb97-5"><a href="#cb97-5" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb97-6"><a href="#cb97-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb97-7"><a href="#cb97-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">'Verhältnis Flosse / Schnabel'</span>,</span>
<span id="cb97-8"><a href="#cb97-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">'Anzahl der Penguine'</span></span>
<span id="cb97-9"><a href="#cb97-9" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
</div>
<div class="cell-output-display">
<p><img src="01_Einfuehrung_files/figure-html/unnamed-chunk-43-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Hier wurden nun die Histogramme für die beiden Geschlechter gestapelt. Dies ist ein bisschen unübersichtlich. Lasst uns lieber ein eigenes Fenster (in ggplot: Facette) für jedes Geschlecht erstellen. Dies geht mit der <code>facet_wrap()</code>-Funktion. Sie kann verwendet werden, um eine weitere Schicht zu unserem <code>ggplot</code> hinzuzufügen.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb99"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb99-1"><a href="#cb99-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb99-2"><a href="#cb99-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(</span>
<span id="cb99-3"><a href="#cb99-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> mutierte_pinguine,</span>
<span id="cb99-4"><a href="#cb99-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> ratio, <span class="at">fill =</span> sex)</span>
<span id="cb99-5"><a href="#cb99-5" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb99-6"><a href="#cb99-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb99-7"><a href="#cb99-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">'Verhältnis Flosse / Schnabel'</span>,</span>
<span id="cb99-8"><a href="#cb99-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">'Anzahl der Penguine'</span></span>
<span id="cb99-9"><a href="#cb99-9" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb99-10"><a href="#cb99-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="fu">vars</span>(sex))</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
</div>
<div class="cell-output-display">
<p><img src="01_Einfuehrung_files/figure-html/unnamed-chunk-44-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
</section>
<section id="for-schleifen-und-if-bedinungen" class="level1">
<h1>for-Schleifen und if-Bedinungen</h1>
<p>for-Schleifen sind für Programmierer, das was das Summenzeichen <span class="math inline">\(\sum\)</span> für Mathematiker ist.</p>
<p>Im Prinzip läuft ein Summenzeichen ja folgendermaßen. Man hat einen Laufindex <span class="math inline">\(k\)</span> und eine Indexmenge <span class="math inline">\(I\)</span>. Oftmals ist <span class="math inline">\(I = \{1, \ldots, n\}\)</span> für eine natürliche Zahl <span class="math inline">\(n\)</span>. Dann durchläuft der Index <span class="math inline">\(k\)</span> die Indexmenge <span class="math inline">\(I\)</span> Schritt für Schritt und führt dabei Berechnungen durch. So lässt sich schreiben:</p>
<p><span class="math display">\[
\sum_{k = 1}^n k = \frac{n(n + 1)}{2}
\]</span></p>
<p>Beim Programmieren ist es ähnlich, sieht nur (in jeder Programmiersprache) bisschen anders aus. In R sieht eine for-Schleife so aus:</p>
<div class="sourceCode" id="cb101"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb101-1"><a href="#cb101-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (<span class="sc">&lt;</span>Laufindex<span class="sc">&gt;</span> <span class="cf">in</span> <span class="sc">&lt;</span>Indexmenge<span class="sc">&gt;</span>) {</span>
<span id="cb101-2"><a href="#cb101-2" aria-hidden="true" tabindex="-1"></a>  <span class="sc">&lt;</span>Anweisungen für jede Iteration<span class="sc">&gt;</span></span>
<span id="cb101-3"><a href="#cb101-3" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Wir würden die obige Formel also folgendermaßen schreiben.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb102"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb102-1"><a href="#cb102-1" aria-hidden="true" tabindex="-1"></a>n <span class="ot">&lt;-</span> <span class="dv">10</span></span>
<span id="cb102-2"><a href="#cb102-2" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb102-3"><a href="#cb102-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (k <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span>n) {</span>
<span id="cb102-4"><a href="#cb102-4" aria-hidden="true" tabindex="-1"></a>  x <span class="ot">&lt;-</span> x <span class="sc">+</span> k</span>
<span id="cb102-5"><a href="#cb102-5" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb102-6"><a href="#cb102-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-7"><a href="#cb102-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Überprüfe ob das richtige rauskommt</span></span>
<span id="cb102-8"><a href="#cb102-8" aria-hidden="true" tabindex="-1"></a>x <span class="sc">==</span> (n <span class="sc">*</span> (n <span class="sc">+</span> <span class="dv">1</span>) <span class="sc">/</span> <span class="dv">2</span>) </span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
</div>
<p>Allgemeiner können wir über beliebige Indexmengen (Vektoren) eine for-Schleife laufen lassen und den Laufindex nennen wie wir wollen. Beispielsweise könnten wir die Formel</p>
<p><span class="math display">\[
  \sum_{k = 1}^n k^2 = \frac{n(n+1(2n+1))}{6}
\]</span></p>
<p>folgendermaßen nachrechnen</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb104"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb104-1"><a href="#cb104-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb104-2"><a href="#cb104-2" aria-hidden="true" tabindex="-1"></a>n <span class="ot">&lt;-</span> <span class="dv">10</span></span>
<span id="cb104-3"><a href="#cb104-3" aria-hidden="true" tabindex="-1"></a>quadratzahlen <span class="ot">&lt;-</span> (<span class="dv">1</span><span class="sc">:</span>n)<span class="sc">^</span><span class="dv">2</span></span>
<span id="cb104-4"><a href="#cb104-4" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (bla <span class="cf">in</span> quadratzahlen) {</span>
<span id="cb104-5"><a href="#cb104-5" aria-hidden="true" tabindex="-1"></a>  x <span class="ot">&lt;-</span> x <span class="sc">+</span> bla </span>
<span id="cb104-6"><a href="#cb104-6" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb104-7"><a href="#cb104-7" aria-hidden="true" tabindex="-1"></a>x <span class="sc">==</span> (n <span class="sc">*</span> (n <span class="sc">+</span> <span class="dv">1</span>) <span class="sc">*</span> (<span class="dv">2</span> <span class="sc">*</span> n <span class="sc">+</span> <span class="dv">1</span>)) <span class="sc">/</span> <span class="dv">6</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
</div>
<p>In der Praxis würde man allerdings eher mit der <code>sum()</code> Funktion arbeiten.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb106"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb106-1"><a href="#cb106-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(<span class="dv">1</span><span class="sc">:</span>n)</span>
<span id="cb106-2"><a href="#cb106-2" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 55</span></span>
<span id="cb106-3"><a href="#cb106-3" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>((<span class="dv">1</span><span class="sc">:</span>n)<span class="sc">^</span><span class="dv">2</span>)</span>
<span id="cb106-4"><a href="#cb106-4" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 385</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Oftmals werden for-Schleifen mit if-Bedingungen kombiniert. Diese sorgen dafür, dass ausgewählter Code nur unter bestimmten Bedingungen ausgeführt wird. Der grundsätzliche Syntax einer if-Bedingung ist</p>
<div class="sourceCode" id="cb107"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb107-1"><a href="#cb107-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">&lt;</span>Bedingung<span class="sc">&gt;</span>) {</span>
<span id="cb107-2"><a href="#cb107-2" aria-hidden="true" tabindex="-1"></a>  <span class="sc">&lt;</span>Anweisung falls Bedingung wahr<span class="sc">&gt;</span></span>
<span id="cb107-3"><a href="#cb107-3" aria-hidden="true" tabindex="-1"></a>} <span class="cf">else</span> {</span>
<span id="cb107-4"><a href="#cb107-4" aria-hidden="true" tabindex="-1"></a>  <span class="sc">&lt;</span>Anweisung falls Bedingung <span class="fu">falsch</span> (optional)<span class="sc">&gt;</span></span>
<span id="cb107-5"><a href="#cb107-5" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Beispielsweise könnten wir unterschiedliche Ausgaben erzeugen:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb108"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb108-1"><a href="#cb108-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (k <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>) {</span>
<span id="cb108-2"><a href="#cb108-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># k %% 2 berechnet den Rest (im Sinne von modulo)</span></span>
<span id="cb108-3"><a href="#cb108-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> ((k <span class="sc">%%</span> <span class="dv">2</span>) <span class="sc">==</span> <span class="dv">0</span>) {</span>
<span id="cb108-4"><a href="#cb108-4" aria-hidden="true" tabindex="-1"></a>    text <span class="ot">&lt;-</span> <span class="st">'Gerade Zahl'</span></span>
<span id="cb108-5"><a href="#cb108-5" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb108-6"><a href="#cb108-6" aria-hidden="true" tabindex="-1"></a>    text <span class="ot">&lt;-</span> <span class="st">'Ungerade Zahl'</span></span>
<span id="cb108-7"><a href="#cb108-7" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb108-8"><a href="#cb108-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(text)</span>
<span id="cb108-9"><a href="#cb108-9" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Ungerade Zahl"
[1] "Gerade Zahl"
[1] "Ungerade Zahl"
[1] "Gerade Zahl"
[1] "Ungerade Zahl"
[1] "Gerade Zahl"
[1] "Ungerade Zahl"
[1] "Gerade Zahl"
[1] "Ungerade Zahl"
[1] "Gerade Zahl"</code></pre>
</div>
</div>
<p>Wir könnten auf diese Art und Weise einen Münzwurf simulieren. Dabei hilft uns die Funktion <code>runif()</code>. Diese simuliert eine Zahl zwischen 0 und 1, sodass Zahlen zwischen 0 und 0.5 mit Wahrscheinlichkeit 50% eintreten.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb110"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb110-1"><a href="#cb110-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (k <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>) {</span>
<span id="cb110-2"><a href="#cb110-2" aria-hidden="true" tabindex="-1"></a>  zufallszahl <span class="ot">&lt;-</span> <span class="fu">runif</span>(<span class="dv">1</span>)</span>
<span id="cb110-3"><a href="#cb110-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (zufallszahl <span class="sc">&gt;</span> <span class="fl">0.5</span>) {</span>
<span id="cb110-4"><a href="#cb110-4" aria-hidden="true" tabindex="-1"></a>    text <span class="ot">&lt;-</span> <span class="st">'Kopf'</span></span>
<span id="cb110-5"><a href="#cb110-5" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb110-6"><a href="#cb110-6" aria-hidden="true" tabindex="-1"></a>    text <span class="ot">&lt;-</span> <span class="st">'Zahl'</span></span>
<span id="cb110-7"><a href="#cb110-7" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb110-8"><a href="#cb110-8" aria-hidden="true" tabindex="-1"></a>  <span class="co"># paste0 fügt Texte zusammen</span></span>
<span id="cb110-9"><a href="#cb110-9" aria-hidden="true" tabindex="-1"></a>  text <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">'Wurf '</span>, k, <span class="st">": "</span>, text)</span>
<span id="cb110-10"><a href="#cb110-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(text)</span>
<span id="cb110-11"><a href="#cb110-11" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Wurf 1: Zahl"
[1] "Wurf 2: Kopf"
[1] "Wurf 3: Zahl"
[1] "Wurf 4: Zahl"
[1] "Wurf 5: Kopf"
[1] "Wurf 6: Kopf"
[1] "Wurf 7: Kopf"
[1] "Wurf 8: Zahl"
[1] "Wurf 9: Zahl"
[1] "Wurf 10: Kopf"</code></pre>
</div>
</div>
<p>In der Praxis würde man auch hier eine for-Schleife umgehen und vektorisierte Funktionen verwenden. Dazu bräuchte man hier <code>if_else()</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb112"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb112-1"><a href="#cb112-1" aria-hidden="true" tabindex="-1"></a>zufallszahlen <span class="ot">&lt;-</span> <span class="fu">runif</span>(<span class="dv">10</span>)</span>
<span id="cb112-2"><a href="#cb112-2" aria-hidden="true" tabindex="-1"></a>zufallszahlen</span>
<span id="cb112-3"><a href="#cb112-3" aria-hidden="true" tabindex="-1"></a><span class="do">##  [1] 0.7727583 0.6022377 0.6304520 0.6756548 0.8040557 0.3220764 0.4570665</span></span>
<span id="cb112-4"><a href="#cb112-4" aria-hidden="true" tabindex="-1"></a><span class="do">##  [8] 0.7584410 0.7190761 0.4755144</span></span>
<span id="cb112-5"><a href="#cb112-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb112-6"><a href="#cb112-6" aria-hidden="true" tabindex="-1"></a>text <span class="ot">&lt;-</span> <span class="fu">if_else</span>(zufallszahlen <span class="sc">&gt;</span> <span class="fl">0.5</span>, <span class="st">'Kopf'</span>, <span class="st">'Zahl'</span>)</span>
<span id="cb112-7"><a href="#cb112-7" aria-hidden="true" tabindex="-1"></a>text</span>
<span id="cb112-8"><a href="#cb112-8" aria-hidden="true" tabindex="-1"></a><span class="do">##  [1] "Kopf" "Kopf" "Kopf" "Kopf" "Kopf" "Zahl" "Zahl" "Kopf" "Kopf" "Zahl"</span></span>
<span id="cb112-9"><a href="#cb112-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb112-10"><a href="#cb112-10" aria-hidden="true" tabindex="-1"></a><span class="fu">paste0</span>(<span class="st">'Wurf '</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, <span class="st">": "</span>, text)</span>
<span id="cb112-11"><a href="#cb112-11" aria-hidden="true" tabindex="-1"></a><span class="do">##  [1] "Wurf 1: Kopf"  "Wurf 2: Kopf"  "Wurf 3: Kopf"  "Wurf 4: Kopf" </span></span>
<span id="cb112-12"><a href="#cb112-12" aria-hidden="true" tabindex="-1"></a><span class="do">##  [5] "Wurf 5: Kopf"  "Wurf 6: Zahl"  "Wurf 7: Zahl"  "Wurf 8: Kopf" </span></span>
<span id="cb112-13"><a href="#cb112-13" aria-hidden="true" tabindex="-1"></a><span class="do">##  [9] "Wurf 9: Kopf"  "Wurf 10: Zahl"</span></span></code><button title="In die Zwischenablage kopieren" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Fußnoten</h2>

<ol>
<li id="fn1"><p>Ich will damit auf keinen Fall suggerieren, dass Datenvisualiserung nur “bunte Bilder malen” ist. Datenvisualisierung ist enorm wichtig (auch wenn man das als Mathematiker nicht immer glauben mag.)<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>Ich weiß wirklich nicht, ob Weißheit hier das richtige Wort ist<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section></div></main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Kopiert");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
</div> <!-- /content -->



</body></html>